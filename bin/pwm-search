#!/usr/bin/env node

require('colors')
var program = require('commander')
var database = require('../database')

program.parse(process.argv)

if (!program.args.length) {
  console.error('Please enter a search query')
}

var query = program.args.join(' ')

database.search(query, function(error, results) {
  if (error || !results.length) {
    return console.error(error ?
      error.message :
      'No results for '.grey + query.yellow
    )
  }
  console.log('')
  results.forEach(function(result) {
    console.log(
      '  ' + result.class_name.yellow + ': ' +
      result.summary + '\n' +
      '  ' + result.url.grey + '\n'
    )
  })
})
